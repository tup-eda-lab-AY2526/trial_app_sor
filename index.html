<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Path Profile: Curvature, Fresnel Clearance & Plot</title>
  <link rel="stylesheet" href="/assets/css/styles.css" />
  <script defer src="/assets/js/vendor/miniplot.min.js"></script>
  <script defer src="/assets/js/app.js"></script>
</head>
<body>
  <div class="container">
    <h1>Path Profile Analyzer</h1>

    <section class="controls">
      <div class="control-group">
        <label for="csvFile">Upload CSV (distance_m,elevation_m):</label>
        <input type="file" id="csvFile" accept=".csv" />
      </div>
      <div class="row">
        <div class="control-group">
          <label for="freqGHz">Frequency (GHz)</label>
          <input type="number" id="freqGHz" step="0.1" min="0.1" value="5.8" />
        </div>
        <div class="control-group">
          <label for="kFactor">Effective Earth radius factor k</label>
          <input type="number" id="kFactor" step="0.01" min="0.5" value="1.333" />
        </div>
        <div class="control-group">
          <label for="txH">TX antenna height (m)</label>
          <input type="number" id="txH" step="0.1" min="0" value="10" />
        </div>
        <div class="control-group">
          <label for="rxH">RX antenna height (m)</label>
          <input type="number" id="rxH" step="0.1" min="0" value="10" />
        </div>
      </div>
      <div class="row">
        <button id="plotBtn">Compute & Plot</button>
        <button id="resetBtn" class="secondary">Reset</button>
      </div>
      <p class="hint">CSV format: header distance_m,elevation_m; distances in meters, elevation in meters above mean sea level. Processing is 100% client-side; no network requests are made.</p>
    </section>

    <section class="results">
      <div class="summary" id="summary"></div>
    </section>

    <section class="plot">
      <div class="legend">
        <span class="legend-item"><span class="swatch swatch-ground"></span> Ground + curvature</span>
        <span class="legend-item"><span class="swatch swatch-los"></span> LOS</span>
        <span class="legend-item"><span class="swatch swatch-fresnel"></span> 60% Fresnel envelope</span>
        <span class="legend-item"><span class="swatch swatch-obstruct"></span> Obstructions</span>
      </div>
      <canvas id="plotCanvas" width="1000" height="520"></canvas>
    </section>

    <section class="footer">
      <p>All compute and plotting run client-side. Vendor plotting lib: /assets/js/vendor/miniplot.min.js</p>
    </section>
  </div>
</body>
</html>
