<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Offline Microwave Link Simulator (Phase A)</title>
  <link rel="stylesheet" href="./assets/css/styles.css" />
  <script src="./assets/js/app.js" defer></script>
</head>
<body>
  <header class="app-header">
    <h1>Offline Microwave Link Simulator</h1>
    <p class="subtitle">Phase A: Distance-based link budget (runs fully offline)</p>
  </header>

  <main class="container">
    <section class="card">
      <h2>Inputs</h2>
      <p class="hint">Enter values and results will update automatically. Units are indicated per field.</p>
      <div id="error-summary" class="error-summary" aria-live="polite" hidden></div>

      <form id="link-form" novalidate>
        <div class="grid">
          <div class="field">
            <label for="frequency">Frequency (GHz)</label>
            <input id="frequency" name="frequency" type="number" inputmode="decimal" step="0.01" min="0.001" placeholder="e.g., 18" value="18" required />
          </div>
          <div class="field">
            <label for="distance">Link distance (km)</label>
            <input id="distance" name="distance" type="number" inputmode="decimal" step="0.01" min="0.001" placeholder="e.g., 10" value="10" required />
          </div>
          <div class="field">
            <label for="txPower">Tx power (dBm)</label>
            <input id="txPower" name="txPower" type="number" inputmode="decimal" step="0.1" placeholder="e.g., 20" value="20" />
          </div>
          <div class="field">
            <label for="txGain">Tx antenna gain (dBi)</label>
            <input id="txGain" name="txGain" type="number" inputmode="decimal" step="0.1" placeholder="e.g., 30" value="30" />
          </div>
          <div class="field">
            <label for="rxGain">Rx antenna gain (dBi)</label>
            <input id="rxGain" name="rxGain" type="number" inputmode="decimal" step="0.1" placeholder="e.g., 30" value="30" />
          </div>
          <div class="field">
            <label for="txFeeder">Tx feeder loss (dB)</label>
            <input id="txFeeder" name="txFeeder" type="number" inputmode="decimal" step="0.1" placeholder="e.g., 2" value="2" />
          </div>
          <div class="field">
            <label for="rxFeeder">Rx feeder loss (dB)</label>
            <input id="rxFeeder" name="rxFeeder" type="number" inputmode="decimal" step="0.1" placeholder="e.g., 2" value="2" />
          </div>
          <div class="field">
            <label for="miscLosses">Misc losses (dB)</label>
            <input id="miscLosses" name="miscLosses" type="number" inputmode="decimal" step="0.1" placeholder="e.g., 0" value="0" />
          </div>
          <div class="field">
            <label for="rxThreshold">Rx threshold (dBm)</label>
            <input id="rxThreshold" name="rxThreshold" type="number" inputmode="decimal" step="0.1" placeholder="e.g., -75" value="-75" />
          </div>
        </div>
        <div class="actions">
          <button type="submit" class="primary">Compute</button>
          <button type="reset" class="secondary">Reset</button>
        </div>
      </form>
    </section>

    <section class="card results">
      <h2>Results</h2>
      <div class="results-grid">
        <div class="result">
          <div class="label">FSPL</div>
          <div class="value" id="fsplVal">—</div>
          <div class="unit">dB</div>
        </div>
        <div class="result">
          <div class="label">EIRP</div>
          <div class="value" id="eirpVal">—</div>
          <div class="unit">dBm</div>
        </div>
        <div class="result">
          <div class="label">Rx power at receiver</div>
          <div class="value" id="rxPowerVal">—</div>
          <div class="unit">dBm</div>
        </div>
        <div class="result">
          <div class="label">Total additional losses</div>
          <div class="value" id="addLossesVal">0.00</div>
          <div class="unit">dB</div>
        </div>
        <div class="result highlight">
          <div class="label">Fade margin</div>
          <div class="value" id="fadeMarginVal">—</div>
          <div class="unit">dB</div>
        </div>
      </div>
      <p class="note">FSPL is computed using 92.45 + 20·log10(f[GHz]) + 20·log10(d[km]). Fade margin = Rx power − Rx threshold.</p>
    </section>
  </main>

  <footer class="app-footer">
    <small>No external network calls. Save this page and open it locally to use offline.</small>
  </footer>
</body>
</html>
